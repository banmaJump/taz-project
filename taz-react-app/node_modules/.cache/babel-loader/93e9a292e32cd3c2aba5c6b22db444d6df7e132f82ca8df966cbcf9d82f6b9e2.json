{"ast":null,"code":"import React,{useState,useEffect}from'react';import Intro from'./Intro';import Post from'./Post';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Main=()=>{const[posts,setPosts]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchPosts=async()=>{setLoading(true);setError(null);try{const response=await fetch(`${process.env.REACT_APP_API_BASE_URL}/api/posts?page=${currentPage}`);if(!response.ok){throw new Error('Failed to fetch posts');}const data=await response.json();setPosts(data.posts);setTotalPages(data.totalPages);}catch(err){console.error('Error fetching posts:',err);setError(err.message);}finally{setLoading(false);}};fetchPosts();},[currentPage]);const handlePreviousPage=()=>{if(currentPage>1){setCurrentPage(currentPage-1);}};const handleNextPage=()=>{if(currentPage<totalPages){setCurrentPage(currentPage+1);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});}return/*#__PURE__*/_jsxs(\"div\",{id:\"main\",children:[/*#__PURE__*/_jsx(Intro,{}),/*#__PURE__*/_jsx(Post,{posts:posts}),/*#__PURE__*/_jsxs(\"ul\",{className:\"actions pagination\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{onClick:handlePreviousPage,className:`button large previous ${currentPage===1?'disabled':''}`,children:\"\\u524D\\u306E\\u30DA\\u30FC\\u30B8\\u3078\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"span\",{children:[currentPage,\" / \",totalPages]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{onClick:handleNextPage,className:`button large next ${currentPage===totalPages?'disabled':''}`,children:\"\\u6B21\\u306E\\u30DA\\u30FC\\u30B8\\u3078\"})})]})]});};export default Main;","map":{"version":3,"names":["React","useState","useEffect","Intro","Post","jsx","_jsx","jsxs","_jsxs","Main","posts","setPosts","currentPage","setCurrentPage","totalPages","setTotalPages","loading","setLoading","error","setError","fetchPosts","response","fetch","process","env","REACT_APP_API_BASE_URL","ok","Error","data","json","err","console","message","handlePreviousPage","handleNextPage","children","id","className","onClick"],"sources":["C:/Users/hase/Desktop/Taz-Project/taz-react-app/src/components/Main.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Intro from './Intro';\r\nimport Post from './Post';\r\n\r\nconst Main = () => {\r\n    const [posts, setPosts] = useState([]);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [totalPages, setTotalPages] = useState(1);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchPosts = async () => {\r\n            setLoading(true);\r\n            setError(null);\r\n            try {\r\n                const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/api/posts?page=${currentPage}`);\r\n                if (!response.ok) {\r\n                    throw new Error('Failed to fetch posts');\r\n                }\r\n                const data = await response.json();\r\n                setPosts(data.posts);\r\n                setTotalPages(data.totalPages);\r\n            } catch (err) {\r\n                console.error('Error fetching posts:', err);\r\n                setError(err.message);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchPosts();\r\n    }, [currentPage]);\r\n\r\n    const handlePreviousPage = () => {\r\n        if (currentPage > 1) {\r\n            setCurrentPage(currentPage - 1);\r\n        }\r\n    };\r\n\r\n    const handleNextPage = () => {\r\n        if (currentPage < totalPages) {\r\n            setCurrentPage(currentPage + 1);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <div>Loading...</div>;\r\n    }\r\n\r\n    if (error) {\r\n        return <div>Error: {error}</div>;\r\n    }\r\n\r\n    return (\r\n        <div id=\"main\">\r\n            <Intro />\r\n            <Post posts={posts} />\r\n            <ul className=\"actions pagination\">\r\n                <li><a onClick={handlePreviousPage} className={`button large previous ${currentPage === 1 ? 'disabled' : ''}`}>前のページへ</a></li>\r\n                <li><span>{currentPage} / {totalPages}</span></li>\r\n                <li><a onClick={handleNextPage} className={`button large next ${currentPage === totalPages ? 'disabled' : ''}`}>次のページへ</a></li>\r\n            </ul>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Main;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}